# TCP vs QUIC パフォーマンスベンチマークツール

## 概要

このツールは、TCPとQUICプロトコルのデータ転送性能を比較するためのベンチマーク・アプリケーションです。

サーバーは指定されたプロトコル（TCPまたはQUIC）で起動し、1GBのランダムデータを生成して待機します。クライアントが接続すると、このデータをクライアントに送信します。
クライアントは指定されたプロトコルでサーバーに接続し、データを受信します。受信完了後、転送にかかった時間、総受信バイト数、そしてスループット（Gbps）を計算して表示します。

## 実行方法

実験は、サーバーとクライアントを別々のターミナルで実行する必要があります。

### 1. ビルド

まず、実行ファイルをビルドします。

```sh
go build -o tcp-quic-bench cmd/benchmark/main.go
```

### 2. サーバーの起動

次に、サーバーを起動します。プロトコルは `-proto` フラグで `tcp` または `quic` を指定できます。サーバーはバックグラウンドで実行することを推奨します（末尾に `&` を付けます）。

#### QUICサーバーの場合

```sh
./tcp-quic-bench -mode server -proto quic &
```

#### TCPサーバーの場合

```sh
./tcp-quic-bench -mode server -proto tcp &
```

サーバーはデフォルトで `0.0.0.0:4242` で待機します。

### 3. クライアントの実行

サーバーが起動したら、クライアントを実行して性能を測定します。

#### QUICクライアントの場合

```sh
./tcp-quic-bench -mode client -proto quic -addr 127.0.0.1:4242
```

#### TCPクライアントの場合

```sh
./tcp-quic-bench -mode client -proto tcp -addr 127.0.0.1:4242
```

クライアントの実行が完了すると、ターミナルに以下のようなベンチマーク結果が出力されます。

```
--- Benchmark Results ---
Total bytes received: 1073741824 bytes
Total time taken:     10.53s
Throughput:           0.8155 Gbps
-------------------------
```
